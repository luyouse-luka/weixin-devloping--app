# 字体上传工具使用指南

## 问题说明

微信小程序**不支持直接使用本地字体文件路径**（如 `fonts/introrust-base.woff`），必须使用以下方式之一：

1. **云存储路径**（推荐）：`cloud://your-env-id.xxx/fonts/introrust-base.woff`
2. **网络URL**：`https://your-server.com/fonts/introrust-base.woff`
3. **Base64编码**（仅适用于小文件）

## 解决方案：字体上传工具

我已经创建了一个**字体上传工具页面**，帮助您轻松配置字体。

### 使用步骤

#### 方法一：使用字体上传工具页面（推荐）

1. **打开字体上传工具**
   - 在微信开发者工具中，访问页面：`pages/uploadFonts/uploadFonts`
   - 或者在小程序中添加导航入口

2. **上传字体到云存储**
   - 在微信开发者工具中打开"云开发"
   - 进入"存储" -> "文件管理"
   - 点击"上传文件"
   - 选择 `fonts/IntroRust-Base.woff` 文件
   - 上传后，复制文件ID（格式：`cloud://your-env-id.xxx/fonts/introrust-base.woff`）

3. **在工具页面配置**
   - 点击"上传"按钮
   - 在弹出的输入框中粘贴文件ID
   - 点击确定

4. **重复步骤2-3**
   - 上传 `Lexend-Regular.woff`
   - 上传其他字重（可选）

5. **测试字体**
   - 点击"测试字体加载"按钮
   - 查看控制台确认字体加载成功

#### 方法二：直接在 app.js 中配置

1. **上传字体到云存储**（同上）

2. **在 app.js 中配置**
   ```javascript
   globalData: {
     introRustFontUrl: 'cloud://your-env-id.xxx/fonts/introrust-base.woff',
     lexendFontUrl: 'cloud://your-env-id.xxx/fonts/lexend-regular.woff'
   }
   ```

3. **重新编译小程序**

## 为什么不能直接使用本地文件？

微信小程序的安全机制限制了直接访问本地文件系统，这是为了：
- 保护用户隐私
- 防止恶意代码访问本地文件
- 确保小程序的安全性

## 替代方案

### 方案1：云存储（推荐）
- ✅ 免费（有一定免费额度）
- ✅ 速度快
- ✅ 无需自己搭建服务器
- ✅ 自动CDN加速

### 方案2：网络服务器
- 需要自己的服务器
- 需要支持HTTPS
- 需要配置CORS

### 方案3：Base64编码
- 仅适用于小文件（< 100KB）
- 会增加代码体积
- 不推荐用于字体文件

## 快速开始

1. **开通云开发**（如果还没有）
   - 在微信开发者工具中点击"云开发"
   - 按照提示开通

2. **上传字体文件**
   - 进入云存储
   - 上传 `fonts` 文件夹中的字体文件

3. **使用字体上传工具**
   - 访问 `pages/uploadFonts/uploadFonts` 页面
   - 按照提示配置字体URL

4. **完成！**
   - 字体会自动加载
   - 标题使用 IntroRust
   - 正文使用 Lexend

## 注意事项

1. **文件格式**
   - 推荐使用 `.woff` 或 `.woff2` 格式（文件更小）
   - `.ttf` 格式也可以使用

2. **文件大小**
   - 建议单个字体文件 < 2MB
   - 如果文件太大，考虑使用字体子集

3. **云存储路径**
   - 文件ID格式：`cloud://环境ID.xxx/文件路径`
   - 确保路径正确

4. **测试**
   - 配置后重新编译小程序
   - 查看控制台确认字体加载成功
   - 检查页面字体是否正确显示

## 故障排除

### 字体未加载
- 检查文件ID是否正确
- 检查云存储文件是否存在
- 查看控制台错误信息

### 字体显示不正确
- 确认字体文件格式正确
- 检查字体名称是否匹配
- 查看样式是否正确应用

### 上传失败
- 检查云开发是否已开通
- 检查文件大小是否超限
- 检查网络连接

## 需要帮助？

如果遇到问题，请：
1. 查看控制台错误信息
2. 检查云存储文件是否上传成功
3. 确认文件ID格式正确
4. 重新编译小程序

